# 接口文档：同城配送系统 - 管理员订单发布接口

## 一、接口概述

- **接口名称**：发布订单接口
- **接口路径**：`/api/admin/publish-order`
- **请求方式**：`POST`
- **接口功能**：  
  供管理员通过 API 调用发布新的配送订单（如系统集成或合作平台使用）。  
  请求需携带有效的 API Key 才能通过验证。

---

## 二、请求头（Header）

| 参数名 | 类型 | 是否必填 | 说明 |
| :-- | :-- | :-- | :-- |
| `Content-Type` | String | 是 | 固定为 `application/json` |
| `X-API-KEY` | String | 是 | 用于身份认证的 API Key，需在数据库中有效 |

---

## 三、请求参数（Request Body）

请求体为一个 `DeliveryOrder` JSON 对象，字段如下：

| 参数名 | 类型 | 是否必填 | 默认值 | 说明 |
| :-- | :-- | :-- | :-- | :-- |
| `senderName` | String | 是 | — | 寄件人姓名 |
| `senderPhone` | String | 是 | — | 寄件人手机号，格式需符合 `1[3-9]\\d{9}` |
| `senderAddress` | String | 是 | — | 寄件人详细地址 |
| `consigneeName` | String | 是 | — | 收件人姓名 |
| `consigneePhone` | String | 是 | — | 收件人手机号 |
| `consigneeAddress` | String | 是 | — | 收件人详细地址 |
| `goodsType` | String | 是 | — | 货物类型，可选值：`ordinary`（普通）、`fragile`（易碎）、`fresh`（生鲜） |
| `weight` | Decimal(10,2) | 否 | `null` | 货物重量（单位：kg） |
| `volume` | Decimal(10,3) | 否 | `null` | 货物体积（单位：m³） |
| `deliveryFee` | Decimal(10,2) | 是 | — | 配送总费用（单位：元），必须 > 0 |
| `platformIncome` | Decimal(10,2) | 否 | `0.00` | 平台抽成部分（系统可计算） |
| `deliverymanIncome` | Decimal(10,2) | 否 | `0.00` | 配送员收入部分（系统可计算） |
| `expectedMins` | Integer | 否 | `null` | 预计配送时效（单位：分钟） |
| `remark` | String | 否 | `null` | 订单备注 |
| `status` | Integer | 否 | `0` | 订单状态，初始为 `0`（待接单） |
| `deliverymanId` | Long | 否 | `null` | 指定配送员ID（一般为空，系统分配） |
| `abandonReason` | String | 否 | `null` | 放弃原因（仅适用于状态=5） |
| `abandonDescription` | String | 否 | `null` | 放弃详细说明（仅适用于状态=5） |

示例；
```json
{
  "senderName": "张三",
  "senderPhone": "13812345678",
  "senderAddress": "北京市海淀区中关村大街 27 号",
  "consigneeName": "李四",
  "consigneePhone": "13987654321",
  "consigneeAddress": "北京市朝阳区望京东路 10 号",
  "goodsType": "文件",
  "weight": 1.2,
  "volume": 0.01,
  "deliveryFee": 15.00,
  "expectedHours": 2,
  "remark": "请尽快送达"
}
```

## 四、**成功响应**

| 字段        | 类型     | 说明             |
| :-------- | :----- | :------------- |
| `code`    | int    | 状态码，`200` 表示成功 |
| `message` | String | 结果描述           |
| `orderId` | String | 系统生成的订单编号      |
示例：
```json
{
  "code": 200,
  "message": "订单发布成功",
  "orderId": "ORD20251109114530231"
}
```

## 六、错误响应

### 1. API Key 无效
```json
{
  "code": 403,
  "message": "非法访问或API Key无效"
}
```

### 2. 参数错误
```json
{
  "code": 500,
  "message": "服务器错误：NullPointerException"
}
```

### 3. 服务器异常
```json
{
  "code": 500,
  "message": "服务器错误：NullPointerException"
}
```
