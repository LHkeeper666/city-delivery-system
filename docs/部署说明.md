---
title: |
  \begin{center}
  \textbf{同城配送管理系统}\\
  \textbf{部署说明}
  \end{center}
date: "2025年11月"

# 页面排版
fontsize: 12pt
geometry: margin=2.5cm
linestretch: 1.5

# 目录设置
toc: true
toc-depth: 3

# 超链接颜色
colorlinks: true
linkcolor: blue

# LaTeX 宏包与设置
header-includes:
  - \input{fontsetup.tex}
---

\newpage

## 一、引言

本文档用于指导用户在服务器或本地环境中部署本系统。
本系统基于 **JDK 8**、**Tomcat 8.5.72**、**MySQL 8** 开发，采用 **MVC 结构 + JSP** 前端，最终以 **WAR 包(J2EE 应用程序)** 的形式进行发布。

本说明书包含运行环境准备、数据库部署、外部配置文件设置、Tomcat 部署步骤，以及常见问题解决方案。

## 二、部署环境要求

| 名称     | 版本要求                   |
| ------ | ---------------------- |
| JDK    | 1.8 及以上                |
| Tomcat | 8.5.x         |
| MySQL  | 8.0              |
| Maven  | 可选，用于源码编译              |
| 操作系统   | Windows / Linux / macOS |

## 三、部署步骤

### 1. 数据库初始化  

在 MySQL 中创建数据库，创建表和插入初始数据：

\begin{lstlisting}[language=Sql]
CREATE DATABASE cdms CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;
USE cdms;
SET NAMES utf8mb4;
source MySQL.sql
source data.sql
\end{lstlisting}

### 2. 数据库配置

在服务器或本地创建配置文件，例如：

\begin{lstlisting}[language=Bash]
D:\config\db.properties   （Windows）
/opt/cdms/config/db.properties   （Linux）
\end{lstlisting}
编辑 `db.properties` 文件内容如下：
\begin{lstlisting}[language=Bash]
db.driver=com.mysql.cj.jdbc.Driver
db.url=jdbc:mysql://localhost:3306/cdms?useUnicode=true&characterEncoding=UTF-8&serverTimezone=Asia/Shanghai
db.username=你的数据库用户名
db.password=你的数据库密码
\end{lstlisting}

### 3. Tomcat 配置    

在 Tomcat bin 目录下创建或编辑 setenv.bat（Windows）或 setenv.sh（Linux），添加以下内容：
\begin{lstlisting}[language=Bash]
set "CATALINA_OPTS=-Dcdms.config=完整路径\db.properties"
\end{lstlisting}
例如：      
\begin{lstlisting}[language=Bash]
set "CATALINA_OPTS=-Dcdms.config=D:\config\db.properties"
\end{lstlisting}
> 路径最好不要包含中文，否则可能提示找不到文件。

### 4. 部署 WAR 文件     

将 `cdms.war` 复制到 Tomcat 的 `webapps` 目录下，例如：      
\begin{lstlisting}[language=Bash]
Tomcat安装目录\webapps\cdms.war
\end{lstlisting}

### 5. 启动 Tomcat

进入 Tomcat 根目录，执行启动命令：        
\begin{lstlisting}[language=Bash]
.\bin\startup.bat   （Windows）
./bin/startup.sh    （Linux）
\end{lstlisting}

### 6. 访问系统

在浏览器中打开：
\begin{lstlisting}
http://localhost:8080/cdms/
\end{lstlisting}
初次登录可使用默认管理员账号：

| 角色  | 用户名  | 密码   |   
| --- | ---- | ---- |   
| 管理员 | root | 1234 |   
